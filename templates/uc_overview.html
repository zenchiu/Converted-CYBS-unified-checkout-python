<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Unified Checkout Overview</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script>
      if(window.self === window.top) {}
      else {
        var emptyDiv = document.createElement('div');
        emptyDiv.innerHTML = "";
        document.body.append(emptyDiv);
      }
    </script>
</head>
<body>
<nav class="navbar navbar-expand-md navbar-dark sticky-top bg-dark">
    <div class="container-fluid">
        <a class="navbar-brand" href="/">Unified Checkout</a>
    </div>
</nav>
<main role="main" class="container">
    <div class="py-4 text-center">
        <h2>Request Capture Context</h2>
    </div>
    <div class="py-2 text-left">
        <p class="lead">
            Once you are ready to render the checkout page, you need to request the Capture Context from the
            <code>/up/v1/capture-contexts</code> endpoint. The capture context request below drives Unified Checkout's
            behavior, including accepted payment types, card networks, address information to be collected, and more.
            The capture context request also allows you to optionally pass in previously collected information (e.g.
            billing and shipping) to pre-fill this into Unified Checkout. The request produces a JWT that is
            used to initialize Unified Checkout.
        </p>
    </div>

    {% if configs %}
    <div class="mb-3">
        <label for="configSelect" class="form-label">Capture context preset:</label>
        <select id="configSelect" class="form-select" style="max-width: 400px;" onchange="window.location.href='/ucoverview?config=' + this.value">
            {% for filename, display in configs %}
            <option value="{{ filename }}" {% if filename == selected_config %}selected{% endif %}>{{ display }}</option>
            {% endfor %}
        </select>
        <p class="form-text text-muted">Select a preset and edit the JSON below before generating.</p>
    </div>
    {% endif %}

    <form action="/capture-context" method="post">
        <button type="submit" class="btn btn-primary">Generate Capture Context</button>
        <p></p>
        <div class="form-group">
            <label for="ta1">Capture Context Request payload. You can change the request parameters by editing the
                values below:</label>
            <textarea class="form-control" id="ta1" name="captureContextRequest" style="height: 300px;">{{ json_request }}</textarea>
        </div>
    </form>
</main>
</body>
</html>
